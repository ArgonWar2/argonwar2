<h2>Stats</h2><ul id="statistics">	<?php	$account_rows = $db->countOfAll("account`.`account");	$player_rows  = $db->countOfAll("player`.`player");	$guild_rows   = $db->countOfAll("player`.`guild");	$rates 		  = $db->query("SELECT `name`, `value` FROM `backend`.`settings` WHERE `group` = 'rate' LIMIT 3");	// $online_players = $db->countOf("account`.`account", "`isOnline` = '1'");	/*// Socket connection	$socket_host = "127.0.0.1";  $socket_conn = @socket_create(AF_INET, SOCK_STREAM, SOL_TCP);  socket_connect($socket_conn, $socket_host, 13000);  socket_write($socket_conn, "\x40USER_COUNT\x0A", "18");  socket_recv($socket_conn, $buffer, 256, MSG_WAITALL);  $online_players = substr($buffer, 15);  $online_players = explode(' ', $online_players);  //*/	// for debug purposes: echo "<pre>"; print_r($online_players);  //  echo "<b>".$online_players[0]." è il totale giocatori online</b><br><br>";  //  echo "<span style='color:red'> $online_players[1]</span><br>";  //  echo "Gialli [Chunjo]: $online_players[2]<br>";  //  echo "Blu [Jinno]: $online_players[3]<br>";  //  @socket_close($socket_conn);	?>	<li class="grey-gradient">		<span>Account registrati</span>		<span><?=number_format($account_rows, 0, '', '.')?></span>	</li>	<li class="grey-gradient">		<span>Giocatori online</span>		<span>		<?php // activate socket first: number_format($online_players[0], 0, '', '.'); ?>				</span>	</li>		<li class="grey-gradient">		<span>Giocatori totali</span>		<span><?=number_format($player_rows, 0, '', '.')?></span>	</li>	<li class="grey-gradient">		<span>Gilde create</span>		<span><?=number_format($guild_rows, 0, '', '.')?></span>	</li>	<?php	$service  = array('Server','Login','Database');	$port 	  = array(13000, 11002, 3306);	$timeout  = 2;	$limit	  = sizeof($service);	for ($i=0; $i<$limit; $i++) {	@$call = @fsockopen(HOSTNAME, $port[$i], $errno, $errstr, $timeout);	?>	<li class="grey-gradient">		<span>Stato <?=$service[$i]?></span>		<span>			<?php if ($call): ?>			<img src="<?=ROOT?>img/stats/green.png" alt="Attivo">			<?php else: ?>			<img src="<?=ROOT?>img/stats/red.png" alt="Spento">			<?php endif; @fclose($call); ?>		</span>	</li>	<?php } ?>		<?php while ($rate = $db->fetchNextObject($rates)) { ?>	<li class="grey-gradient">		<span>Rate <?=$rate->name?></span>		<span><?=$rate->value?>%</span>	</li>	<?php } ?></ul><p class="gray-link" style="font-size:8px;margin:0">Le statistiche sono aggiornate in Real Time</p>